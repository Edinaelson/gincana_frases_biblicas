@inherits LayoutComponentBase
@inject ApplicationDbContext Db

<RadzenHeader Style="background:#fff; box-shadow:0 2px 4px rgba(0,0,0,0.06);">
    <div style="display:flex; align-items:center; justify-content:space-between; padding:8px 16px;">
        <div style="display:flex; gap:12px; align-items:center;">
            <RadzenHeading Size="H4">Gincana Passagens Bíblicas</RadzenHeading>
            <NavLink href="/" class="rz-link" Match="NavLinkMatch.All">Home</NavLink>
            <NavLink href="/usuarios" class="rz-link">Usuários</NavLink>
            <NavLink href="/painel" class="rz-link">Painel</NavLink>
        </div>

        <div style="display:flex; gap:8px; align-items:center;">
            <input @bind="headerNovoNome" placeholder="Novo usuário" class="rz-input" />
            <RadzenButton Size="Small" Click="AddUsuarioFromHeader" Text="Cadastrar" Style="min-width:100px;" />
        </div>
    </div>
</RadzenHeader>

<main>
    @Body
</main>

<div id="blazor-error-ui" data-nosnippet>
    An unhandled error has occurred.
    <a href="." class="reload">Reload</a>
    <span class="dismiss">🗙</span>
</div>

@code {
    private string headerNovoNome = string.Empty;

    private async Task AddUsuarioFromHeader()
    {
        if (string.IsNullOrWhiteSpace(headerNovoNome))
            return;

        var u = new Usuario { Nome = headerNovoNome };
        Db.Usuarios.Add(u);
        await Db.SaveChangesAsync();

        headerNovoNome = string.Empty;
    }
}
